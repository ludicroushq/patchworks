---
title: GitHub Action Setup
description: Setting up the Patchworks GitHub Action
---

# GitHub Action Setup

Patchworks can automatically check for updates from your template repository using GitHub Actions. When you create a new project with `patchworks create`, a GitHub Action workflow file is automatically created for you.

## Default Workflow

The default workflow file is created at `.github/workflows/patchworks.yaml` and looks like this:

```yaml
name: Patchworks

on:
  workflow_dispatch:
  schedule:
    - cron: "0 0 * * *"

jobs:
  patchworks:
    runs-on: ubuntu-latest
    steps:
      - uses: ludicroushq/patchworks@v0
        with:
          patchworks-package: patchworks@0.0.3
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

This workflow:

- Can be manually triggered with `workflow_dispatch`
- Runs automatically at midnight every day (`cron: '0 0 * * *'`)
- Uses the latest version of the Patchworks GitHub Action

## Customizing the Schedule

You can customize the workflow file to change when it runs. For example, to run weekly instead of daily:

```yaml
name: Patchworks Weekly Check

on:
  workflow_dispatch:
  schedule:
    - cron: "0 0 * * 0" # Run at midnight every Sunday

jobs:
  patchworks:
    runs-on: ubuntu-latest
    steps:
      - uses: ludicroushq/patchworks@v0
        with:
          patchworks-package: patchworks@0.0.3
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

> **Note:** The GitHub Action is currently under development. Check back for updates on additional features and options.

## Advanced Inputs

The action is a thin wrapper around the `patchworks update` CLI. You can customise the behaviour with inputs:

- `patchworks-package`: Package spec passed to `npx`. Pin to a release (e.g. `patchworks@0.0.3`) or test a canary tarball (`https://pkg.pr.new/ludicroushq/patchworks@<commit>`).
- `patchworks-args`: Extra flags forwarded to `patchworks update` (for example `--branch-name patchworks/canary`).
- `branch-name`, `base-branch`, `git-name`, `git-email`: Override naming and git identity defaults.
- `node-version`: Set the Node runtime (defaults to `lts/*`).

```yaml
steps:
  - uses: ludicroushq/patchworks@v0
    with:
      patchworks-package: https://pkg.pr.new/ludicroushq/patchworks@<commit>
      patchworks-args: "--branch-name patchworks/canary"
    env:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

For local automation you can run the same command directly: `npx patchworks update --token <PAT> --repository owner/repo`.

Behind the scenes the composite action commits the prepared diff and opens a pull request with [`peter-evans/create-pull-request`](https://github.com/peter-evans/create-pull-request). If the update branch already has an open PR, the action updates that PR instead of creating duplicates.
